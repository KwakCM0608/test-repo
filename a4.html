<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>과제 4 – 추상 미술 (애니메이션)</title>
<link rel="stylesheet" href="style.css" />
<script src="libs/p5.min.js"></script>
</head>
<body>
<div class="container page">
  <h2>과제 4 · 추상 미술 (애니메이션)</h2>
  <div class="row">
    <div class="media"><img src="assets/a4.gif" alt="과제4 GIF" /></div>
    <pre class="code"><code>// 과제4 핵심 소스 (요약)
// recFps=12, recSecs=10, colorMode(HSB), lerpColor(), sin/cos/millis() 사용
// 전체 원본 코드는 본문 하단 Live p5 참고
let recFps=12, recSecs=10, isPaused=false;
function setup(){ createCanvas(600,400); frameRate(recFps); colorMode(HSB,360,100,100,100); }
function draw(){ if(isPaused) return; /* … 네가 준 코드 그대로 … */ }
function keyPressed(){ if(key==='g'||key==='G') startGifExport(); }
function startGifExport(){
  if(typeof saveGif!=='function'){ console.log('error'); return; }
  try{ saveGif('abstract_anim',10,{fps:12}); }
  catch(e1){ try{ saveGif('abstract_anim',120,12); }
  catch(e2){ try{ saveGif({fileName:'abstract_anim',duration:10,fps:12,download:true}); }
  catch(e3){ console.log('error'); }}}
}</code></pre>
  </div>

  <hr/>
  <h3>Live p5 (실행용)</h3>
  <div class="media"><div id="sketch4"></div></div>
  <p class="small">키보드 G: saveGif 시도(환경에 따라 작동 방식 다를 수 있음)</p>
  <p><a class="btn" href="index.html">← 메인으로</a></p>
</div>

<script>
let recFps = 12;
let recSecs = 10;
let isPaused = false;

function setup(){
  let c = createCanvas(600, 400);
  c.parent('sketch4');
  frameRate(recFps);
  colorMode(HSB, 360, 100, 100, 100);
}

function draw(){
  if(isPaused) return;

  const t  = millis()/1000.0;
  const w1 = TWO_PI/4.0;
  const w2 = TWO_PI/3.0;
  const w3 = TWO_PI/5.0;
  const hueBase = (frameCount*3) % 360;

  const cA = color((hueBase+200)%360, 30, 100);
  const cB = color((hueBase+230)%360, 20, 95);
  const mix = (sin(w3*t)+1)/2;
  const bg  = lerpColor(cA, cB, mix);
  background(bg);

  push();
  const x1 = 150 + 20*sin(w1*t);
  const y1 = 100 + 14*cos(w2*t);
  const s1 = 150 + 22*sin(w2*t);
  fill((hueBase+0)%360, 70, 100, 80); noStroke(); ellipse(x1, y1, s1, s1); pop();

  push();
  const x2 = 250 + 24*cos(w2*t);
  const y2 = 150 + 18*sin(w1*t);
  const s2 = 150 + 18*sin(w1*t+PI/3);
  fill((hueBase+200)%360, 70, 100, 80); ellipse(x2, y2, s2, s2); pop();

  push();
  const x3 = 200 + 16*sin(w3*t+PI/6);
  const y3 = 200 + 20*cos(w3*t+PI/4);
  const s3 = 150 + 20*sin(w3*t+PI/2);
  fill((hueBase+110)%360, 70, 100, 80); ellipse(x3, y3, s3, s3); pop();

  push();
  const pulse = 4 + 2*sin(w3*t);
  noFill(); stroke((hueBase+10)%360, 10, 20); strokeWeight(pulse); rect(80, 40, 440, 300, 30); pop();

  push();
  stroke((hueBase+230)%360, 60, 60, 50); strokeWeight(10 + 2*sin(w1*t)); line(-20, 400, 600, -20 + 15*sin(w1*t));
  stroke((hueBase+5)%360, 80, 80, 60); strokeWeight(6 + 1.5*cos(w2*t)); line(0, 0, 600, 400 + 10*sin(w2*t));
  stroke((hueBase+120)%360, 70, 70, 60); strokeWeight(4 + sin(w3*t)); line(0, 200 + 12*sin(w3*t), 300, 0);
  stroke((hueBase+270)%360, 60, 70, 60); strokeWeight(4 + cos(w3*t)); line(300, 400, 600, 200 + 12*cos(w3*t));
  stroke((hueBase+40)%360, 90, 90, 55); strokeWeight(8 + 2*sin(w1*t+PI/3)); line(150, 400, 600, 100 + 12*sin(w1*t+PI/3));
  stroke((hueBase+180)%360, 70, 90, 55); strokeWeight(8 + 1.5*cos(w2*t+PI/6)); line(0, 300, 450 + 16*cos(w2*t+PI/6), 0);
  pop();

  const r = 8;
  push(); noStroke(); fill((hueBase+10)%360, 60, 100, 70); ellipse(30 + r*cos(w2*t), 30 + r*sin(w2*t), 40, 40); pop();
  push(); noStroke(); fill((hueBase+120)%360, 50, 100, 70); ellipse(570 + r*cos(w1*t+PI/3), 30 + r*sin(w1*t+PI/3), 40, 40); pop();
  push(); noStroke(); fill((hueBase+220)%360, 50, 100, 70); ellipse(30 + r*cos(w3*t+PI/6), 370 + r*sin(w3*t+PI/6), 40, 40); pop();
  push(); noStroke(); fill((hueBase+50)%360, 70, 100, 70); ellipse(570 + r*cos(w2*t+PI/2), 370 + r*sin(w2*t+PI/2), 40, 40); pop();

  push(); translate(510, 330); rotate(0.5*sin(w1*t)); fill((hueBase+45)%360, 90, 100); noStroke(); triangle(-60, 20, 10, -50, 50, 40); pop();

  push(); noStroke(); fill(0,0,20,40); rect(20, height-26, width-40, 8, 4); const prog = (frameCount % (recFps*recSecs)) / (recFps*recSecs); fill(0,0,20,80); circle(20 + (width-40)*prog, height-22, 10); pop();
}
function keyPressed(){ if(key==='g'||key==='G') startGifExport(); }
function startGifExport(){
  if (typeof saveGif !== 'function'){ console.log('error'); return; }
  try{ saveGif('abstract_anim', 10, {fps:12}); }
  catch(e1){ try{ saveGif('abstract_anim', 120, 12); }
  catch(e2){ try{ saveGif({fileName:'abstract_anim', duration:10, fps:12, download:true}); }
  catch(e3){ console.log('error'); }}}
}
</script>
</body>
</html>
